#!/usr/bin/env python3
"""Debug script to check indexing"""

# Check the first few expected values from original testbench
# Row 0, col 0-13: all zeros for all 8 channels
# Row 1, col 5: 8'b00000100 means channel 2 = 1, others = 0

# In flattened format: out[w*196 + r*14 + c]
# For weight=0, row=0, col=0: idx = 0*196 + 0*14 + 0 = 0
# For weight=2, row=1, col=5: idx = 2*196 + 1*14 + 5 = 392 + 14 + 5 = 411

# Original format from testbench:
# Row 1, Col 5 = 8'b00000100
# This means: bit 0 (ch0) = 0, bit 1 (ch1) = 0, bit 2 (ch2) = 1, etc.

print("Expected at row=1, col=5:")
print("  8'b00000100 means:")
for ch in range(8):
    bit = (0b00000100 >> ch) & 1
    idx = ch * 196 + 1 * 14 + 5
    print(f"    Channel {ch}: bit={bit}, flattened_idx={idx}")

print("\nFirst 10 channels worth of data (1960 bits):")
EXPECTED_OUTPUT_MNIST = "00000000000000000000000000000000000000000000000111111000000000000001000000000001100000000001100000000011110000000000000100000000000000010000000000000100000011111110000000000000000000000000000000000000000000000000000000000000000000000000000000011111000000000000000100000000000111000000000011000000001110000000000000110000000000000001000000000000000000001100011100000011111110000000000000000000000000000000000000000000000000000000000000000001111100000000000000000000000000011000000000000000000000111000000000000000000000000000000000000000000000000000000000000000000111110000000000000000000000000000000000000000000000000000000000000000000111110000000000000000000000000000000000000000000000000011100000000000001100000000000000000000000000000000000010000000000000111111000000000000000000000000000000000000000000000000000000000000000000011111100000000000001100000000000110000000000111000000001111000000000000011000000000000011000000000000110000000111111000000001111100000000000000000000000000000000000000011100000000000111111000000000000111000000000011100000001111110000000011111000000000001110000000000000110000000000011100000011111110000000111111000000000000000000000000000000000000000000000000000000110000000000011111100000000000001100000000001101000000011111000000001111100000000000011000000000000011000000000000110000001111111100000001111100000000000000000000000000000000000000000000000000000011100000000000111111000000000000110000000000011100000001110100000000011110000000000000100000000000001100000000000011000000011111110000000001100000000000000000000000000000000000"

# Check specific indices
test_cases = [
    (0, 0, 0),  # Should be 0
    (2, 1, 5),  # Should be 1
    (1, 1, 6),  # Should be 1
]

for w, r, c in test_cases:
    idx = w * 196 + r * 14 + c
    bit = EXPECTED_OUTPUT_MNIST[idx]
    print(f"Weight={w}, Row={r}, Col={c}: idx={idx}, bit={bit}")
